<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>CourseMaster AI Control Center</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
      /* ================= 全局样式 ================= */
      :root {
        --bg-color: #f8f9fa;
        --card-bg: #ffffff;
        --text-black: #111111;
        --text-grey: #666666;
        --border-color: #e5e5e5;
        --orbit-line: #dddddd;
        --btn-black: #000000;
      }

      body {
        margin: 0;
        padding: 0;
        font-family: "Inter", sans-serif;
        background-color: var(--bg-color);
        color: var(--text-black);
        height: 100vh;
        overflow: hidden; /* 禁止滚动 */
      }

      /* ================= 1. 轨道主页样式 (不变) ================= */
      .orbit-system {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 800px;
        height: 800px;
        z-index: 0;
        pointer-events: none;
      }
      .orbit-path {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 1px dashed var(--orbit-line);
        border-radius: 50%;
        opacity: 0.6;
      }
      .path-1 {
        width: 340px;
        height: 340px;
      }
      .path-2 {
        width: 500px;
        height: 500px;
      }
      .path-3 {
        width: 660px;
        height: 660px;
      }

      .orbit-rotator {
        position: absolute;
        top: 50%;
        left: 50%;
        border-radius: 50%;
        animation: orbit-spin linear infinite;
      }
      .rotator-1 {
        width: 340px;
        height: 340px;
        margin: -170px;
        animation-duration: 25s;
      }
      .rotator-2 {
        width: 500px;
        height: 500px;
        margin: -250px;
        animation-duration: 40s;
        animation-direction: reverse;
      }
      .rotator-3 {
        width: 660px;
        height: 660px;
        margin: -330px;
        animation-duration: 60s;
      }

      .satellite-wrapper {
        position: absolute;
        top: 0;
        left: 50%;
        transform: translate(-50%, -50%);
        animation: counter-spin linear infinite;
        pointer-events: auto;
        cursor: pointer;
      }
      .rotator-1 .satellite-wrapper {
        animation-duration: 25s;
      }
      .rotator-2 .satellite-wrapper {
        animation-duration: 40s;
        animation-direction: reverse;
      }
      .rotator-3 .satellite-wrapper {
        animation-duration: 60s;
      }

      .satellite-icon {
        width: 52px;
        height: 52px;
        background: #fff;
        border: 1px solid var(--border-color);
        border-radius: 50%;
        padding: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        display: flex;
        justify-content: center;
        align-items: center;
        transition: 0.3s;
      }
      .satellite-icon img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        filter: grayscale(100%);
        opacity: 0.7;
        transition: 0.3s;
      }
      .satellite-icon:hover {
        transform: scale(1.1);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      }
      .satellite-icon:hover img {
        filter: grayscale(0%);
        opacity: 1;
      }

      @keyframes orbit-spin {
        100% {
          transform: rotate(360deg);
        }
      }
      @keyframes counter-spin {
        100% {
          transform: rotate(-360deg);
        }
      }

      .main-card {
        position: relative;
        z-index: 10;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(20px);
        width: 90%;
        max-width: 400px;
        padding: 40px 30px;
        border-radius: 30px;
        text-align: center;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
        border: 1px solid rgba(0, 0, 0, 0.05);
      }
      .subtitle {
        font-size: 12px;
        font-weight: 700;
        color: #999;
        text-transform: uppercase;
        letter-spacing: 2px;
        margin-bottom: 10px;
      }
      h1 {
        font-size: 36px;
        font-weight: 900;
        margin: 0 0 30px 0;
        line-height: 1.1;
        letter-spacing: -1px;
        background: linear-gradient(135deg, #000 0%, #555 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .start-btn {
        background: var(--btn-black);
        color: white;
        border: none;
        padding: 18px 40px;
        border-radius: 100px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        transition: transform 0.2s;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 40px;
      }
      .start-btn:active {
        transform: scale(0.95);
      }

      .features {
        display: flex;
        justify-content: space-between;
        border-top: 1px solid #eee;
        padding-top: 25px;
      }
      .f-item {
        flex: 1;
        padding: 0 5px;
      }
      .f-icon {
        font-size: 18px;
        margin-bottom: 8px;
        color: #333;
      }
      .f-title {
        font-size: 12px;
        font-weight: 700;
        margin-bottom: 4px;
      }
      .f-desc {
        font-size: 10px;
        color: #888;
        line-height: 1.4;
      }

      /* ================= 2. 内嵌全屏聊天容器 ================= */

      /* 我们不再去“click 悬浮球”，而是用 SDK 的 el 参数直接把聊天窗口挂在这个容器里，全权自己控制显示/隐藏 */
      #coze-chat-container {
        position: fixed;
        inset: 0;
        z-index: 9999;
        background: #ffffff;
        display: none; /* 默认隐藏，点击“启动顾问”再显示 */
      }

      /* 容器里的 iframe/内容全屏铺满 */
      #coze-chat-container iframe {
        width: 100% !important;
        height: 100% !important;
        border: none;
      }

      /* ================= 3. 移动端响应式优化 ================= */
      @media (max-width: 768px) {
        /* 轨道系统缩小适配手机 */
        .orbit-system {
          width: 100vw;
          height: 100vw;
          max-width: 500px;
          max-height: 500px;
        }

        .path-1 {
          width: 200px;
          height: 200px;
        }
        .path-2 {
          width: 300px;
          height: 300px;
        }
        .path-3 {
          width: 400px;
          height: 400px;
        }

        .rotator-1 {
          width: 200px;
          height: 200px;
          margin: -100px;
        }
        .rotator-2 {
          width: 300px;
          height: 300px;
          margin: -150px;
        }
        .rotator-3 {
          width: 400px;
          height: 400px;
          margin: -200px;
        }

        /* 卫星图标缩小 */
        .satellite-icon {
          width: 40px;
          height: 40px;
          padding: 8px;
        }

        /* 主卡片优化 */
        .main-card {
          width: 85%;
          max-width: none;
          padding: 30px 20px;
          border-radius: 24px;
        }

        /* 标题缩小 */
        .subtitle {
          font-size: 10px;
          letter-spacing: 1.5px;
          margin-bottom: 8px;
        }

        h1 {
          font-size: 28px;
          margin: 0 0 24px 0;
        }

        /* 按钮优化 */
        .start-btn {
          padding: 16px 32px;
          font-size: 15px;
          margin-bottom: 30px;
        }

        /* 功能项优化 */
        .features {
          padding-top: 20px;
          flex-wrap: wrap;
        }

        .f-item {
          padding: 0 8px;
          margin-bottom: 12px;
        }

        .f-icon {
          font-size: 16px;
          margin-bottom: 6px;
        }

        .f-title {
          font-size: 11px;
        }

        .f-desc {
          font-size: 9px;
        }
      }

      /* 超小屏手机（iPhone SE 等） */
      @media (max-width: 375px) {
        .orbit-system {
          max-width: 90vw;
          max-height: 90vw;
        }

        .path-1 {
          width: 160px;
          height: 160px;
        }
        .path-2 {
          width: 240px;
          height: 240px;
        }
        .path-3 {
          width: 320px;
          height: 320px;
        }

        .rotator-1 {
          width: 160px;
          height: 160px;
          margin: -80px;
        }
        .rotator-2 {
          width: 240px;
          height: 240px;
          margin: -120px;
        }
        .rotator-3 {
          width: 320px;
          height: 320px;
          margin: -160px;
        }

        .satellite-icon {
          width: 36px;
          height: 36px;
          padding: 6px;
        }

        .main-card {
          width: 90%;
          padding: 24px 16px;
        }

        h1 {
          font-size: 24px;
          margin: 0 0 20px 0;
        }

        .start-btn {
          padding: 14px 28px;
          font-size: 14px;
        }
      }
    </style>
  </head>
  <body>
    <div class="orbit-system">
      <div class="orbit-path path-1"></div>
      <div class="orbit-path path-2"></div>
      <div class="orbit-path path-3"></div>
      <div class="orbit-rotator rotator-1">
        <div class="satellite-wrapper">
          <div class="satellite-icon">
            <img src="https://via.placeholder.com/60?text=DS" alt="DS" />
          </div>
        </div>
      </div>
      <div class="orbit-rotator rotator-2">
        <div class="satellite-wrapper">
          <div class="satellite-icon">
            <img src="https://upload.wikimedia.org/wikipedia/commons/0/04/ChatGPT_logo.svg" alt="OpenAI" />
          </div>
        </div>
      </div>
      <div class="orbit-rotator rotator-3">
        <div class="satellite-wrapper">
          <div class="satellite-icon" onclick="openChat()">
            <img src="https://sf16-sg.tiktokcdn.com/obj/eden-sg/rkpatz_lg_ld/ljhwZthlaukjlkulzlp/icon.png" alt="Coze" />
          </div>
        </div>
      </div>
    </div>

    <div class="main-card">
      <div class="subtitle">CourseMaster AI</div>
      <h1>智能教研<br />中枢系统</h1>

      <button class="start-btn" onclick="openChat()">
        <span>启动顾问</span>
        <i class="fa-solid fa-arrow-right"></i>
      </button>

      <div class="features">
        <div class="f-item">
          <div class="f-icon"><i class="fa-solid fa-brain"></i></div>
          <div class="f-title">深度思维</div>
          <div class="f-desc">方法论模型</div>
        </div>
        <div class="f-item" style="border-left: 1px solid #f0f0f0; border-right: 1px solid #f0f0f0">
          <div class="f-icon"><i class="fa-solid fa-bolt"></i></div>
          <div class="f-title">实时响应</div>
          <div class="f-desc">毫秒级反馈</div>
        </div>
        <div class="f-item">
          <div class="f-icon"><i class="fa-solid fa-database"></i></div>
          <div class="f-title">知识库</div>
          <div class="f-desc">教育部标准</div>
        </div>
      </div>
    </div>

    <!-- 全屏聊天容器：Coze SDK 会把真正的聊天窗口塞到这里 -->
    <div id="coze-chat-container"></div>

    <script src="https://lf-cdn.coze.cn/obj/unpkg/flow-platform/chat-app-sdk/1.2.0-beta.20/libs/cn/index.js"></script>
    <script>
      // 重要：不要把 PAT Token 明文写进前端页面（会被任何访问者直接拿走）
      // 这里用占位符，建议你改为由后端接口下发短期 token。
      const COZE_PAT_TOKEN = "REPLACE_ME_WITH_YOUR_TOKEN";

      // 常见坑：直接双击用 file:// 打开时，第三方 SDK 可能会因为安全策略导致无法正常弹出/鉴权
      // 这里提前给出更明确的提示，避免“点了没反应”难排查。
      if (location.protocol === "file:") {
        console.warn("[Coze] 建议用 http:// 方式打开页面（不要 file:// 直接打开）。");
      }

      const chatContainer = document.getElementById("coze-chat-container");

      // 初始化 SDK
      // 改为：通过 chatBot.el 直接“内嵌”到我们自己的全屏容器里，不再依赖悬浮球
      const client = new CozeWebSDK.WebChatClient({
        config: {
          bot_id: "7594087273495855119",
        },
        componentProps: {
          title: "CourseMaster AI",
        },
        auth: {
          type: "token",
          token: COZE_PAT_TOKEN,
          onRefreshToken: function () {
            return COZE_PAT_TOKEN;
          },
        },
        chatBot: {
          title: "CourseMaster AI",
          uploadable: false,
          el: chatContainer,
        },
        ui: {
          base: {
            layout: "mobile",
            zIndex: 9999,
          },
          asstBtn: {
            isNeed: false, // 关闭 SDK 自带悬浮球，避免多一个入口
          },
          footer: { isShow: false },
        },
      });
      async function openChat() {
        if (COZE_PAT_TOKEN === "pat_tqgLSbvxb8ezU1SyT0OWgP9xDYZAEii46turMB2fGGE1KvUD6ZHYB5Bj5Euf8Wan") {
          alert("请先在 index.html 里把 COZE_PAT_TOKEN 替换成你的 Token，再试一次。");
          return;
        }

        if (location.protocol === "file:") {
          alert("检测到你是用 file:// 方式打开。\n建议用本地 http:// 服务或 GitHub Pages 打开，否则 SDK 可能无法正常弹出。");
          return;
        }

        if (!chatContainer) {
          alert("未找到聊天容器 #coze-chat-container，检查一下 HTML 结构是否被改动。");
          return;
        }

        // 直接把容器显示出来，聊天窗口已经被 SDK 挂载在里面了
        chatContainer.style.display = "block";
      }
    </script>
  </body>
</html>






