<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>AI 聚合对话 - 极简黑白</title>
    <style>
        /* --- 全局黑白灰风格 --- */
        :root {
            --bg-color: #0a0a0a;
            --text-color: #e0e0e0;
            --accent-color: #ffffff;
            --panel-bg: rgba(20, 20, 20, 0.95);
            --border-color: #333;
        }

        body {
            margin: 0;
            height: 100vh;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Courier New', Courier, monospace; /* 极客风字体 */
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* --- 旋转菜单区域 --- */
        .orbit-container {
            position: relative;
            width: 400px;
            height: 400px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
        }

        /* 中心的文本 */
        .center-text {
            position: absolute;
            text-align: center;
            z-index: 10;
        }
        .center-text h1 {
            font-size: 24px;
            letter-spacing: 4px;
            margin: 0;
            color: var(--accent-color);
        }
        .center-text p {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        /* 旋转轨道 */
        .orbit-ring {
            position: absolute;
            width: 300px;
            height: 300px;
            border: 1px dashed #333;
            border-radius: 50%;
            animation: rotate 20s linear infinite;
        }
        
        /* 鼠标放上去暂停旋转，方便点击 */
        .orbit-container:hover .orbit-ring {
            animation-play-state: paused;
        }

        /* 小球 (图标) */
        。planet {
            position: absolute;
            width: 60px;
            height: 60px;
            background: #000;
            border: 1px solid #444;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            font-size: 10px;
            color: white;
            text-align: center;
        }

        .planet:hover {
            background: #fff;
            color: #000;
            transform: scale(1.2);
            box-shadow: 0 0 20px rgba(255,255,255,0.2);
        }

        /* 计算小球位置 (三角函数布局) */
        /* 12点钟方向 */
        .planet:nth-child(1) { top: -30px; left: 120px; } 
        /* 4点钟方向 */
        .planet:nth-child(2) { top: 200px; left: 250px; }
        /* 8点钟方向 */
        .planet:nth-child(3) { top: 200px; left: -10px; }

        /* 防止图标跟着轨道旋转而倒立，给图标加反向旋转动画 */
        .planet span {
            animation: counter-rotate 20s linear infinite;
        }
        .orbit-container:hover .planet span {
            animation-play-state: paused;
        }

        @keyframes rotate { 100% { transform: rotate(360deg); } }
        @keyframes counter-rotate { 100% { transform: rotate(-360deg); } }

        /* --- 自定义聊天框 (初始隐藏) --- */
        .chat-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 800px;
            height: 600px;
            background: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            opacity: 0;
            pointer-events: none;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            z-index: 100;
        }

        .chat-modal.active {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: all;
        }

        /* 聊天框头部 */
        .chat-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .chat-title {
            font-weight: bold;
            font-size: 14px;
            text-transform: uppercase;
        }
        .close-btn {
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            font-size: 20px;
        }
        .close-btn:hover { color: #fff; }

        /* 消息展示区 */
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        /* 消息气泡 */
        .message {
            max-width: 70%;
            padding: 10px 15px;
            border-radius: 4px;
            font-size: 14px;
            line-height: 1.5;
        }
        .message.user {
            align-self: flex-end;
            background: #333;
            color: #fff;
            border-bottom-right-radius: 0;
        }
        .message.bot {
            align-self: flex-start;
            background: transparent;
            border: 1px solid #333;
            color: #ccc;
            border-top-left-radius: 0;
        }

        /* 输入区域 */
        .chat-input-area {
            padding: 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            gap: 10px;
        }
        
        input[type="text"] {
            flex: 1;
            background: #000;
            border: 1px solid #333;
            color: #fff;
            padding: 12px;
            outline: none;
            font-family: inherit;
        }
        input[type="text"]:focus {
            border-color: #666;
        }
        
        button.send-btn {
            background: #fff;
            color: #000;
            border: none;
            padding: 0 20px;
            cursor: pointer;
            font-weight: bold;
            transition: opacity 0.2s;
        }
        button.send-btn:hover {
            opacity: 0.8;
        }
        
        /* 加载动画 */
        .typing-indicator { font-size: 12px; color: #666; margin-left: 10px; display: none;}
    </style>
</head>
<body>

    <div class="orbit-container" id="orbitMenu">
        <div class="center-text">
            <h1>AGI NEXUS</h1>
            <p>SELECT YOUR INTELLIGENCE</p>
        </div>

        <div class="orbit-ring">
            <div class="planet" onclick="openChat('DeepSeek', 'bot_id_1')">
                <span>DeepSeek</span>
            </div>
            <div class="planet" onclick="openChat('OpenAI', 'bot_id_2')">
                <span>OpenAI</span>
            </div>
            <div class="planet" onclick="openChat('Doubao', 'bot_id_3')">
                <span>Doubao</span>
            </div>
        </div>
    </div>

    <div class="chat-modal" id="chatModal">
        <div class="chat-header">
            <span class="chat-title" id="currentBotName">AI ASSISTANT</span>
            <button class="close-btn" onclick="closeChat()">×</button>
        </div>
        
        <div class="chat-messages" id="messageList">
            <div class="message bot">你好，我是智能体。请问有什么可以帮你？</div>
        </div>
        <div class="typing-indicator" id="typing">Thinking...</div>

        <div class="chat-input-area">
            <input type="text" id="userInput" placeholder="输入你的问题..." onkeypress="handleEnter(event)">
            <button class="send-btn" onclick="sendMessage()">SEND</button>
        </div>
    </div>

    <script>
        // --- 逻辑控制 ---
        
        // 你的 Coze PAT (Personal Access Token)
        // 注意：实际项目中不要把 Key 直接放在前端代码里，容易泄露。这里仅做演示。
        const COZE_API_TOKEN = 'YOUR_COZE_PAT_HERE'; 
        
        let currentBotId = ''; // 当前选中的 Bot ID

        // 打开聊天框
        function openChat(botName, botId) {
            // 1. 设置当前聊天的标题和ID
            document.getElementById('currentBotName').innerText = botName + " / MODEL";
            currentBotId = botId;

            // 2. 隐藏菜单，显示聊天框
            document.getElementById('orbitMenu').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('orbitMenu').style.display = 'none';
                document.getElementById('chatModal').classList.add('active');
            }, 500);

            // 3. (可选) 这里可以清空之前的聊天记录
            // document.getElementById('messageList').innerHTML = '';
        }

        // 关闭聊天框
        function closeChat() {
            document.getElementById('chatModal').classList.remove('active');
            setTimeout(() => {
                document.getElementById('orbitMenu').style.display = 'flex';
                document.getElementById('orbitMenu').style.opacity = '1';
            }, 500);
        }

        // 回车发送
        function handleEnter(e) {
            if (e.key === 'Enter') sendMessage();
        }

        // 发送消息核心逻辑
        async function sendMessage() {
            const input = document.getElementById('userInput');
            const messageList = document.getElementById('messageList');
            const typing = document.getElementById('typing');
            const text = input.value.trim();

            if (!text) return;

            // 1. 显示用户消息
            addMessage(text, 'user');
            input.value = '';
            typing.style.display = 'block';

            // 2. 调用 Coze API (演示非流式调用，简单易懂)
            // 真实场景建议用流式 (Streaming) 获得打字机效果
            try {
                // 模拟 API 调用延迟 (因为没有真实 Key)
                // 真正写代码时，用 fetch 替换下面的 setTimeout
                /*
                const response = await fetch('https://api.coze.cn/open_api/v2/chat', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${COZE_API_TOKEN}`,
                        'Content-Type': 'application/json',
                        'Accept': '*/*'
                    },
                    body: JSON.stringify({
                        "conversation_id": "123", // 可以生成随机ID
                        "bot_id": currentBotId,
                        "user": "user_123",
                        "query": text,
                        "stream": false
                    })
                });
                const data = await response.json();
                const botReply = data.messages[0].content; // 根据实际返回结构调整
                */
                
                // --- 模拟回复 (删除这段，使用上面的 fetch) ---
                await new Promise(r => setTimeout(r, 1500)); 
                const botReply = "这是模拟的回复。你需要去 Coze 后台申请 API Key 并在代码中替换 fetch 部分。";
                // -------------------------------------------

                addMessage(botReply, 'bot');

            } catch (error) {
                console.error(error);
                addMessage("连接失败，请检查 API 设置。", 'bot');
            } finally {
                typing.style.display = 'none';
            }
        }

        function addMessage(text, type) {
            const div = document.createElement('div');
            div.className = `message ${type}`;
            div.innerText = text;
            document.getElementById('messageList').appendChild(div);
            // 自动滚动到底部
            document.getElementById('messageList').scrollTop = document.getElementById('messageList').scrollHeight;
        }
    </script>
</body>
</html>




